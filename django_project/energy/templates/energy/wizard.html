{% extends "energy/base.html" %}

{% block title %}Paso {{ step }} - Asistente de Consumo El√©ctrico{% endblock %}

{% block content %}
<!-- Overlay de loading global -->
<div id="loading-overlay" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center">
    <div class="bg-white rounded-2xl p-8 shadow-2xl flex flex-col items-center gap-4 max-w-sm mx-4">
        <div class="relative">
            <div class="w-16 h-16 border-4 border-green-200 rounded-full"></div>
            <div class="w-16 h-16 border-4 border-green-600 border-t-transparent rounded-full absolute top-0 left-0 animate-spin"></div>
        </div>
        <h3 class="text-xl font-bold text-gray-800">Analizando tu consumo</h3>
        <p class="text-gray-500 text-center text-sm">Estamos generando recomendaciones personalizadas para ti...</p>
    </div>
</div>

<div class="max-w-2xl mx-auto">
    <!-- Progress Bar -->
    <div class="mb-8">
        <div class="flex justify-between text-sm text-gray-600 mb-2">
            <span>Paso {{ step }} de {{ total_steps }}</span>
            <span>{% if step == 1 %}Datos del recibo{% elif step == 2 %}Cuestionario{% else %}Resultados{% endif %}</span>
        </div>
        <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
            <div class="h-full bg-green-500 transition-all duration-300" 
                 style="width: {% widthratio step total_steps 100 %}%"></div>
        </div>
    </div>
    
    <!-- Wizard Container -->
    <div id="wizard" class="bg-white rounded-xl shadow-sm p-6 md:p-8">
        {% if step == 1 %}
            {% include "energy/partials/bill_form.html" %}
        {% elif step == 2 %}
            {% include "energy/partials/survey_form.html" %}
        {% endif %}
    </div>
</div>
{% endblock %}
